(function()
{window.Namespace=function(name,value)
{var base=window;var names=name.split('.');var lastName=names.pop();for(var i=0;i<names.length;i++)
{base=base[names[i]]=base[names[i]]||{};}
if(lastName)
{base=base[lastName]=value;}};window.Public=function(member)
{return{member:member,scope:'Public',_static:false};};window.Protected=function(member)
{return{member:member,scope:'Protected',_static:false};};window.Private=function(member)
{return{member:member,scope:'Private',_static:false};};window.Static=function(member)
{member._static=true;return member;};var registry={};window.Class=function()
{var class_name=arguments[0];if(typeof arguments[1]['extend']!='undefined')
{var parent_class_name=arguments[1]['extend'];var local_members=new arguments[2];}
else
{var parent_class_name=null;var local_members=new arguments[1];}
var public_members={};var protected_members={};var private_members={};for(var name in local_members)
{switch(local_members[name]['scope'])
{case'Public':public_members[name]=local_members[name]['member'];break;case'Protected':protected_members[name]=local_members[name]['member'];break;case'Private':private_members[name]=local_members[name]['member'];break;}}
registry[class_name]={class_name:class_name,parent_class_name:parent_class_name,public_members:public_members,protected_members:protected_members,private_members:private_members};function merge(obj1,obj2,obj3,obj4,obj5,obj6)
{var obj7={};for(var attrname in obj1){obj7[attrname]=obj1[attrname];}
for(var attrname in obj2){obj7[attrname]=obj2[attrname];}
for(var attrname in obj3){obj7[attrname]=obj3[attrname];}
for(var attrname in obj4){obj7[attrname]=obj4[attrname];}
for(var attrname in obj5){obj7[attrname]=obj5[attrname];}
for(var attrname in obj6){obj7[attrname]=obj6[attrname];}
return obj7;}
var context={};function assemble(instance,definition)
{var all_protected_members={};if(definition.parent_class_name!=null)
{all_protected_members=assemble
(instance,registry[definition.parent_class_name]);}
function create_context()
{var protected_context={};for(var x in context)
{if(typeof all_protected_members[x]!='undefined')
{protected_context[x]=context[x];}
if(typeof definition.private_members[x]!='undefined')
{protected_context[x]=context[x];}}
return merge
(definition.public_members,definition.protected_members,definition.private_members,all_protected_members,instance,protected_context);}
function create_member(member)
{if(typeof member=='function')
{return function()
{context=create_context();var ret=member.apply(context,arguments);for(var key in context)
{if(typeof instance[key]!='undefined')
{if(typeof instance[key]!='function')
{instance[key]=context[key];}}}
return ret;};}
else
{return member;}}
function create_child_member(member,parent_member)
{if(typeof member=='function')
{return function()
{context=create_context();var args=Array.prototype.slice.call(arguments);args.unshift(parent_member);var ret=member.apply(context,args);for(var key in context)
{if(typeof instance[key]!='undefined')
{if(typeof instance[key]!='function')
{instance[key]=context[key];}}}
return ret;};}
else
{return member;}}
for(var name in definition.public_members)
{if(typeof instance[name]=='undefined'||String(instance[name]).indexOf('/* klass:')>0)
{instance[name]=create_member
(definition.public_members[name]);}
else
{instance[name]=create_child_member
(definition.public_members[name],instance[name]);}}
for(var name in definition.protected_members)
{if(typeof all_protected_members[name]=='undefined')
{all_protected_members[name]=create_member
(definition.protected_members[name]);}
else
{all_protected_members[name]=create_child_member
(definition.protected_members[name],all_protected_members[name]);}}
for(var name in definition.private_members)
{definition.private_members[name]=create_member
(definition.private_members[name]);}
return all_protected_members;}
var klass=function()
{assemble(this,registry[class_name]);this.init.apply(this,arguments);};Namespace(class_name,klass);};})();

